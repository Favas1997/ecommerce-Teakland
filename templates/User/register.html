{% load static %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Bootstrap E-commerce Templates</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>    
		<!--[if ie]><meta content='IE=8' http-equiv='X-UA-Compatible'/><![endif]-->
		<!-- bootstrap -->
		<link href="{%static 'User/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">      
		<link href="{%static 'User/bootstrap/css/bootstrap-responsive.min.css' %}" rel="stylesheet">		
		<link href="{%static 'User/themes/css/bootstrappage.css' %}" rel="stylesheet"/>
		
		<!-- global styles -->
		<link href="{%static 'User/themes/css/flexslider.css' %}" rel="stylesheet"/>
		<link href="{%static 'User/themes/css/main.css' %}" rel="stylesheet"/>

		<!-- scripts -->
		
		<script src="{%static 'User/bootstrap/js/bootstrap.min.js' %}"></script>				
		<script src="{%static 'User/themes/js/superfish.js'%}"></script>	
		<script src="{% static 'User/themes/js/jquery.scrolltotop.js'%}"></script>
		<!--[if lt IE 9]>			
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
			<script src="js/respond.min.js"></script>
		<![endif]-->
	</head>
    <body>	
		<div id="wrapper" class="container">	
			<section class="main-content p-3">				
				<div class="row">
					 <div class="span5">					
						<h4 class="title"><span class="text"><strong>Login</strong> Form</span></h4>
						<form action="" method="">
							<input type="hidden" name="next" value="/">
							<fieldset>
								<div class="control-group">
									<label class="control-label">Username</label>
									<div class="controls">
										<input type="text" placeholder="Enter your username" id="username1" class="input-xlarge">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Password</label>
									<div class="controls">
										<input type="password" placeholder="Enter your password" id="password" class="input-xlarge">
									</div>
									
										
									
										{% for i in messages %}
										<span>{{i}}</span>			
										{% endfor %}
									
	
								</div>
								<div>
									<span id="error1"></span>
								</div>
								<div class="control-group">
									<input tabindex="3" class="btn btn-inverse large" type="button" value="Sign into your account" id="login">
                                    
									
									<!-- <p class="reset">Recover your <a tabindex="4" href="#" title="Recover your username or password">username or password</a></p> -->
								</div>
								<div>
									<h4>Or</h4>
								</div>
								<div >
									<a href="{% url 'otp_request' %}"><input tabindex="3" class="btn btn-inverse large" type="button" value=" Request Otp" id=""></a>
								</div>  
							</fieldset>
						</form>				
					</div>
					<div class="span7">					
						<h4 class="title"><span class="text"><strong>Register</strong> Form</span></h4>
						<form action="" method="" class="form-stacked">
							<fieldset>
								<div class="control-group">
									<label class="control-label">Username</label>
									<div class="controls">
										<input type="text" placeholder="Enter your username" class="input-xlarge" id="username">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Email address</label>
									<div class="controls">
										<input type="text" placeholder="Enter your email" class="input-xlarge" id="email">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">First_name</label>
									<div class="controls">
										<input type="email" placeholder="First name" class="input-xlarge" id="first_name">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">last name</label>
									<div class="controls">
										<input type="email" placeholder="Last name" class="input-xlarge" id="last_name">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Mobile Number</label>
									<div class="controls">
										<input type="text" placeholder="Mobile Number" class="input-xlarge" id="mobile_number">
									</div>
								</div>
								<div class="control-group">
									<label class="control-label">Password:</label>
									<div class="controls">
										<input type="password" placeholder="Enter your password" class="input-xlarge" id="password1">
									</div>
								</div>	
								<div class="control-group">
									<label class="control-label"> Confirm Password:</label>
									<div class="controls">
										<input type="password" placeholder="Confirm password" class="input-xlarge" id="password2">
									</div>
								</div>							                            
								<div class="control-group">
									<p>Now that we know who you are. I'm not a mistake! In a comic, you know how you can tell who the arch-villain's going to be?</p>
								</div>
								<hr>
								<div class="actions"><input tabindex="9" class="btn btn-inverse large" type="button"  id="btn"    value="Create your account"></div>
								<div>
									<span id="error"></span>
								</div>   
							</fieldset>	
						</form>					
					</div>				
				</div>
			</section>			
			<section id="footer-bar">
				<div class="row">
					<div class="span3">
						<h4>Navigation</h4>
						<ul class="nav">
							<li><a href="./index.html">Homepage</a></li>  
							<li><a href="./about.html">About Us</a></li>
							<li><a href="./contact.html">Contac Us</a></li>
							<li><a href="./cart.html">Your Cart</a></li>
							<li><a href="./register.html">Login</a></li>							
						</ul>					
					</div>
					<div class="span4">
						<h4>My Account</h4>
						<ul class="nav">
							<li><a href="#">My Account</a></li>
							<li><a href="#">Order History</a></li>
							<li><a href="#">Wish List</a></li>
							<li><a href="#">Newsletter</a></li>
						</ul>
					</div>
					<div class="span5">
						<p class="logo"><img src="themes/images/logo.png" class="site_logo" alt=""></p>
						<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. the  Lorem Ipsum has been the industry's standard dummy text ever since the you.</p>
						<br/>
						<span class="social_icons">
							<a class="facebook" href="#">Facebook</a>
							<a class="twitter" href="#">Twitter</a>
							<a class="skype" href="#">Skype</a>
							<a class="vimeo" href="#">Vimeo</a>
						</span>
					</div>					
				</div>	
			</section>
			<section id="copyright">
				<span>Copyright 2013 bootstrappage template  All right reserved.</span>
			</section>
		</div>
		<script src="themes/js/common.js"></script>
		<script>
			$(document).ready(function() {
				$('#checkout').click(function (e) {
					document.location.href = "checkout.html";
				})
			});
		</script>
		<script>
			$('#btn').click(function(){
				console.log('favas')
				var username = $('#username').val()
				var first_name= $('#first_name').val()
				var last_name= $('#last_name').val()
				var email= $('#email').val()
				var password1= $('#password1').val()
				var password2= $('#password2').val()
				var mobile= $('#mobile_number').val()
				var username_length = $('#username').val().length
				var password_length = $('#password1').val().length
				var at = email.indexOf('@')
				var dot =email.indexOf('.')
				var mobile_length= $('#mobile_number').val().length
		
				var data = {
					'csrfmiddlewaretoken':'{{csrf_token}}',
					'username':username,
					'first_name':first_name,
					'last_name':last_name,
					'email':email,
					'password1':password1,
					'password2':password2,
					'mobile_number':mobile
				}
		
			if (username_length<3 ||username_length>15){
				$('#error').html('username contain atleast 3 char')
			}
			else if (password_length<5){
				$('#error').html('password contain 5 character')
			}
			else if (mobile_length<10){
				$('#error').html('invalid format')
			}
			else if (email===''){
				$('#error').html('enter email')   
			}
			else if (at<2 || dot<at+2|| dot+2>=email.length) {
				$('#error').html('enter valid format') 
			}
			else if(password1!=password2){
				$('#error').html('password does not match')
			}
			else{
				console.log('favassss')
				$.ajax({
					url :'/register/',
					method :'POST',
					data : data,
					dataType : 'json',
					success:function(data){
						if(data=='true'){
							window.location.replace('/login/')
						}
						if (data=='false'){
							$('#error').html('user name already exist')
						}
						if (data=='false1'){
							$('#error').html('email already exist')
						}
						if (data=='false2'){
							$('#error').html('Mobile Number already exist')
						}
						
		
					}
		
				})
			}
			})
		</script>
		<script>
			$('#login').click(function(){
				var username=$('#username1').val()
				var password=$('#password').val()
				var data = {
					'csrfmiddlewaretoken':'{{csrf_token}}',
					'username':username,
					'password':password
				}
			 if (username===''){
				 $('#error1').html('enter a valid username')
			 }
			 if (password===''){
				 $('#error1').html('enter a valid password')
			 }
			 else{
				 $.ajax({
					 url:'/login/',
					 method:'POST',
					 data:data,
					 dataType:'json',
					 success:function(data){
						 if (data=='true'){
							 window.location.replace('/') 
						 }
						 if (data=='false1'){
							 $('#error1').html("credentgial not match")
						 }
						 if (data=='false'){
							$('#error1').html("invalid")
						}
						 if (data=='block'){
							$('#error1').html("You are blocked.Contact Admin")
						}
					 }
				 })
			 }
			})
		 </script>
		</div>		
    </body>

</html>