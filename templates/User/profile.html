{% extends 'User/blank.html'%}
{% load static %}
<!DOCTYPE html>
<html lang="en">
    <body>		
		
		<div id="wrapper" class="container">
			{% block content %}	
			<link href="{% static 'User/user.css'%}" rel="stylesheet">
			
			<div class="container">
				<div class="main-body">
				
					  <!-- Breadcrumb -->
	
					  <!-- /Breadcrumb -->
				
					  <div class="row gutters-sm">
						<div class="col-md-4 mb-3">
						  <div class="card">
							<div class="card-body">
								
							  <div class="d-flex flex-column align-items-center text-center">

								<img src="{{profile.imageurl5}}"  class="rounded-circle" alt="image" style="height: 10em;" >
								
								<div class="mt-3">
								  <h4>{{user.username}}</h4>
								  <div class="file btn btn-sm btn-primary  col-md-4 mb-3">
									change image
									<input id="image_upload" onchange="imageupload()" name="image_upload" type="file" class="form-control-file border" >
								</div>
								<style>
									div {
										position: relative;
										overflow: hidden;
									  }
									  input {
										position: absolute;
										font-size: 50px;
										opacity: 0;
										right: 0;
										top: 0;
									  }
								</style>
								
								
								</div>
								<div  style="float: right;">
									<a  href="{% url 'edit_profile' %}" class="btn btn-primary col-md-4 mb-3 " >Change password</a>
									
								</div>
								</div>
								
							  </div>
							</div>
						  </div>
						  
						</div>
						<!--div class="col-md-4 mb-3">
						  <div class="card ">
							<div class="card-body" style="margin-left: 20px;">
							  <div class="row">
								<div  class="col-sm-3">
								  <h6 class="p-3">Full Name</h6>
								</div>
								<div class="col-sm-9 text-secondary">
								  {{user.username}}
								</div>
								<div class="col-sm-3">
									<h6 class="mb-0">Email</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{{user.email}}
								</div>
								
								<div class="col-md-3">
									<h6 class="mb-0">Address</h6>
								  </div>
								  <div class="col-md-9 text-secondary">
								  {% for address in  address%}
									{{address.address}}<br>
									{{address.city}}<br>
									{{address.district}}<br>
									{{address.pincode}}<br>
								  {% endfor %}
								  </div>
								  <div class="col-sm-3">
									<h6 class="mb-0">Mobile</h6>
								  </div>
								  <div class="col-sm-9 text-secondary">
									  {% for address in  address%}
									{{address.mobile}}<br>
								  {% endfor %}
									
								  </div>
							  </div>
							  

							  
							  
						  </div>
						 
						</div>
						<h6 class="mb-0">Order List</h6>
						<div class="table-responsive">
							<div class="table-wrapper ">			
								<table id="example" class="table table-striped table-bordered" style="width:100%">
										<thead>
											<tr>
											
												
												<th>Product</th>
												<th>address</th>
												<th>status</th>
												<th>count</th>
												<th>price</th>
												<th>payment_method</th>
												<th>date</th>
												
			
												
											</tr>
										</thead>
										<tbody>
											{% for order in orders %}
											<tr>
												
												
												<td>{{order.products.product_name}}</td>
												<td>{{order.address.address}}</td>
												<td>{{order.status}}</td>
												<td>{{order.count}}</td>
												<td>{{order.price}}</td>
												<td>{{order.payment_method}}</td>
												<td>{{order.date}}</td>
											</tr>
											{% endfor %}
										  
											
											
											
										   
										</tbody>
			
			
								</table>       
										
									 
								
							</div>
						</div>        
					  </div!-->
					  
								
						
						<section class="main-content">
							<div class="row">
								<div class="span12">
									<div class="accordion" id="accordion2">
										<div class="accordion-group">
											<div class="accordion-heading">
											</div>
											<div id="collapseOne" class="accordion-body in collapse">
												<div class="accordion-inner">
													<div class="row-fluid">
														
														<div class="col-sm-6">
															<div  class="col-sm-3">
															  <h6 class="p-3">Full Name</h6>
															</div>
															<div class="col-sm-3 text-secondary">
															  {{user.username}}
															</div>
															<div class="col-sm-3">
																<h6 class="mb-0">Email</h6>
															</div>
															<div class="col-sm-9 text-secondary">
																{{user.email}}
															</div>
															
															<div class="col-sm-3">
																<h6 class="mb-0">Welcome Coupon</h6>
															</div>
															<div class="col-sm-9 text-secondary">
																{% for coupon_get in coupon_get %}
			                                                      {{coupon_get.coupon_code}}
																  <br>

																{% endfor %}
															</div>
															<div class="col-sm-3">
																<h6 class="mb-0">Referal link</h6>
															</div>
															<div class="col-sm-9 text-secondary">
																{{host}}/referal/{{user.id}}
															</div>
															{% if refer == '0' %}
                                                                   
															{% else %}
															<div class="col-sm-3">
																<h6 class="mb-0">Referal Coupons</h6>
															</div>
															{% for refer in refer %}
															<div class="col-sm-9 text-secondary">
																{{refer.referal_code}}
															</div>
															{% endfor %}
															{% endif %}
															
														</div>
														 
													</div>
												</div>
											</div>
										</div>
										<div class="accordion-group">
											<div class="accordion-heading">
												<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">Address</a>
											</div>
											<div id="collapseTwo" class="accordion-body collapse">
												<div class="accordion-inner">
													<div class="row-fluid" >
														{%for address in address%}
														<div class="span6">
															<div class="form-check">
															   <p>
																   {{address.name}}
																   {{address.Mobile}}<br>
																   {{address.address}}<br>
																   {{address.city}}<br>
																   {{address.district}}<br>
																   {{address.state}}<br>
																   {{address.pincode}}<br>
																   {{address.mobile}}<br>
															  </p>
															  <div>
																<a  href="{% url 'delete_address' address.id %}" class="btn btn-danger ">Delete</a>
																<a  href="" class="btn btn-primary " >edit</a>
			
															  </div>
															</div>
														</div>
														{% endfor %}
														<div  style="float: right;">
															<a  href="{% url 'edit_profile' %}" class="btn btn-primary " >Add address</a>
															
														</div>	
														
													</div>
												</div>
											</div>
										</div>
										<div class="accordion-group">
											<div class="accordion-heading">
												<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">Order history</a>
											</div>
											<div id="collapseThree" class="accordion-body collapse">
												<div class="accordion-inner">
													<div class="table-responsive">
														<div class="table-wrapper ">			
															<table id="example" class="table table-striped table-bordered" style="width:100%">
																	<thead>
																		<tr>
																		
																			
																			<th>Product</th>
																			<th>address</th>
																			<th>status</th>
																			<th>count</th>
																			<th>price</th>
																			<th>payment_method</th>
																			<th>date</th>
																			<th>action</th>
																			
										
																			
																		</tr>
																	</thead>
																	<tbody>
																		{% for order in orders %}
																		<tr>
																			
																			
																			<td>{{order.products.product_name}}</td>
																			<td>{{order.address.address}}</td>
																			<td>{{order.status}}</td>
																			<td>{{order.count}}</td>
																			<td>{{order.price}}</td>
																			<td>{{order.payment_method}}</td>
																			<td>{{order.date}}</td>
																			<td>
                                                                                <a  href="{% url 'cancel_order' order.id  %} " class="btn btn-primary " >Cancel</a>

																			</td>
																		</tr>
																		{% endfor %}
																	  
																		
																		
																		
																	   
																	</tbody>
										
										
															</table>       
																	
																 
															
														</div>
													</div>        	
												</div>
												
											</div>
											
										</div>
				
									</div>				
								</div>
							</div>
						</section>	
					</div>
				</div>
				<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
			     <script>
                   function imageupload(){
					   console.log('aaaaaa')
					   var formData = new FormData();
					   formData.append("image_upload", document.getElementById("image_upload").files[0]);
					   formData.append('csrfmiddlewaretoken','{{csrf_token}}');
					
	
					$.ajax({
						url:'/addimage/',
						method:'POST',
						data:formData,
						cache:false,
						contentType:false,
						processData:false,
						dataType:'json',
						success:function(data){
							if (data=='true'){
							   window.location.replace('/my_account/')
							}
							
							
						}
					})

				   }


				 </script>
			
		{% endblock content %}
	 </div>	

    </body>
</html>